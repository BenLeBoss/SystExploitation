CC=gcc
FLAGS=-std=c89 -pedantic -Wall -Werror -D_GNU_SOURCE -g
RM=rm -fv
.PHONY: all clean
.SECONDARY: shm-message.o
all: shm-client.out shm-server.out
%.o: %.c %.h
	$(CC) $(FLAGS) -c -o $@ $<
%.out: %.c shm-common.o shm-message.o
	$(CC) $(FLAGS) -o $@ $^
shm-common.o: shm-common.c shm-common.h shm-message.h
	$(CC) $(FLAGS) -c -o $@ $<
clean:
	$(RM) *.o *.out
